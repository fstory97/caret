# 캐럿(Caret) 개발자 가이드

이 가이드는 캐럿 프로젝트에 참여하는 소규모 개발자 그룹을 위한 문서입니다. 현재 프로젝트는 초기 개발 단계로, 안정화와 테스트를 거친 후 공개될 예정입니다.

> **참고**: 이 가이드는 현재 Windows 환경을 기본으로 작성되었습니다. Linux/Mac 환경 지원은 추후 제공될 예정입니다.

## 🤖 자신만의 AI 에이전트 생성하기

캐럿 프로젝트에서는 각 개발자가 자신만의 AI 에이전트를 생성하여 사용하는 것을 권장합니다. 충돌 방지와 개인화된 경험을 위해 다음 순서로 진행하세요.

### 1. 새 캐릭터 및 작업 로그 폴더 만들기

```powershell
# Windows PowerShell 환경

# 알파 에이전트 폴더를 자신의 이름으로 복사
Copy-Item -Path "agents-rules/alpha" -Destination "agents-rules/your-name" -Recurse

# 자신의 작업 로그 디렉토리 생성
New-Item -Path "docs/work-logs/your-name" -ItemType Directory -Force
New-Item -Path "docs/work-logs/your-name/tasks" -ItemType Directory -Force
```

### 2. 규칙 파일 설정하기

규칙 파일은 다음과 같이 구성되어 있습니다:

#### global-rules.json (Cursor IDE 설정)
`agents-rules/your-name/global-rules.json` 파일은 Cursor IDE의 설정 화면에서 직접 편집할 수 있는 규칙 파일입니다.
- Cursor IDE의 '설정 > Rules > User Rules' 섹션에서 직접 복사 붙여 넣기하고 편집합니다.
- 이 설정은 모든 채팅, 작성기 및 Ctrl+K 세션에 적용됩니다.
- 에이전트의 기본 페르소나, 언어 스타일, 동작 방식 등을 정의합니다.

#### project-rules.json (메인 규칙 파일)
`agents-rules/your-name/project-rules.json` 파일은 에이전트의 동작을 정의하는 메인 규칙 파일입니다.
- 이 파일은 규칙 감시 스크립트에 의해 `.cursorrules`와 `.windsurfrules`로 복사됩니다.
- CursorIDE와 WindsurfIDE는 작업 디렉토리에서 각각 `.cursorrules`, `.windsurfrules` 파일을 자동으로 로드합니다.
- 상세한 JSON 구조로 되어 있으며, 에이전트의 모든 동작 방식을 정의합니다.

#### project-rules.ko.json (한국어 규칙 파일)
`agents-rules/your-name/project-rules.ko.json` 파일은 한국어로 작성된 규칙 파일입니다.
- 한국어 환경에서 참조용으로 사용됩니다.
- 실제 로드되는 파일은 아니지만, 규칙 내용을 한국어로 확인할 수 있습니다.

#### project-rules.md (마크다운 형식 규칙)
`agents-rules/your-name/project-rules.md` 파일은 마크다운 형식으로 작성된 규칙 문서입니다.
- 사람이 읽기 쉬운 형태로 정리된 규칙 설명입니다.
- 규칙 파일의 내용을 이해하기 쉽게 설명합니다.

### 3. 환경 설정 파일 생성하기

캐럿 프로젝트는 `.env` 파일을 통해 규칙 파일 경로 등을 설정할 수 있습니다. 다음과 같이 만드세요:

```powershell
# .env.example 파일을 복사하여 .env 파일 생성
Copy-Item -Path ".env.example" -Destination ".env"

# 필요에 따라 .env 파일 편집
notepad .env
```

`.env` 파일에서 다음 설정을 커스터마이징할 수 있습니다:
```
# 규칙 파일 경로 설정
RULES_FILE=./agents-rules/your-name/project-rules.json

# 규칙 파일의 대상 출력 위치 설정
CURSOR_RULES_FILE=.cursorrules
WINDSURF_RULES_FILE=.windsurfrules
```

### 4. 파일 감시 스크립트 실행하기

```powershell
# 파일 변경을 감지하는 스크립트 실행
node scripts/doc-watcher.cjs

# 백그라운드에서 실행하려면 (별도 창에서 실행)
Start-Process powershell -ArgumentList "-Command node scripts/doc-watcher.cjs"
```

이 스크립트는 `.env` 파일에 설정된 규칙 파일 경로를 감시하고, 변경 시 자동으로 `.cursorrules`와 `.windsurfrules` 파일을 업데이트합니다. 규칙 파일을 편집할 때마다 반드시 이 스크립트가 실행 중이어야 합니다.

### 5. 룰 편집으로 규칙 수정하기

- VSCode에서 에이전트와 대화 시작 (또는 확장 프로그램이 설치된 다른 IDE)
- "룰모드" 명령어로 규칙 수정 모드로 전환
- "룰 편집" 명령어로 필요한 규칙 수정 논의
- 에이전트가 안내하는 대로 규칙 설정 변경

### 주요 설정 항목 (project-rules.json)

1. **에이전트 기본 정보**
   ```json
   "persona": {
     "name": "YourAgentName",
     "nickname": "별명",
     "type": "AI Assistant",
     "owner": {
       "name": "YourName",
       "title": "원하는 호칭"
     }
   }
   ```

2. **언어 스타일**
   ```json
   "language": {
     "style": "원하는 말투",
     "endings": ["~요", "~할게요~"],
     "expressions": ["원하는 이모지"]
   }
   ```

3. **작업 관리 방식**
   ```json
   "work_process": {
     "daily_routine": {
       "start": "작업 시작 루틴",
       "planning": "계획 수립 방식"
     }
   }
   ```

## 🧠 AI 에이전트와 함께하는 개발 방법론

캐럿 프로젝트는 AI 에이전트와 함께 개발하는 독특한 방법론을 사용합니다. 이 방법론은 개발 효율성을 높이고 일관된 작업 관리를 가능하게 합니다. 복사하여 사용하실 수 있는 알파(\agents-rules\alpha\)에는 아래의 기능을 지원하는 rule이 포함되어있습니다.

### 에이전트 소통 모드 시스템

에이전트와 효과적으로 소통하기 위한 다양한 모드를 제공합니다.

#### 모드 전환 방법
모드 전환은 `[모드명]모드`를 입력하여 수행합니다. (예: `개발모드`, `룰모드`)

#### 주요 모드
1. **개발모드**
   - 목적: 코드 작성, 파일 편집, 실제 개발 작업 수행
   - 특징: 코드 중심, 간결한 설명, 실행 가능한 솔루션 제공
   - 트리거: `개발모드`, `코딩 시작`, `작업 시작`

2. **논의모드**
   - 목적: 개발 관련 Q&A, 설계 논의, 기술 설명
   - 특징: 설명적, 교육적, 심층 기술 분석
   - 트리거: `논의모드`, `설계 논의`, `질문이 있어요`

3. **룰모드**
   - 목적: 규칙과 시스템의 자기 성찰적 개선
   - 특징: 객관적 분석, 에이전트 중심 규칙 개선, 시스템 최적화
   - 트리거: `룰모드`, `규칙 수정`, `규칙 업데이트`

4. **잡담모드**
   - 목적: 개발과 무관한 가벼운 대화
   - 특징: 친근하고 편안한 대화, 비공식적 표현
   - 트리거: `잡담모드`, `잠시 쉬자`, `휴식 시간`

#### 모드 전환 시 컨텍스트 관리
모드 전환 시 작업 컨텍스트는 다음과 같이 관리됩니다:

- **작업 중단 시**: 현재 작업 상태가 기록되고 일일 작업 로그에 모드 전환 표시
- **작업 재개 시**: 작업 로그를 확인하여 이전 중단 지점부터 작업 재개

### 작업 로그 시스템

효과적인 작업 추적과 관리를 위한 로그 시스템을 사용합니다.

#### 일일 작업 로그
- 경로: `/docs/work-logs/{username}/{date}.md`
- 구성:
  ```markdown
  # 일일 작업 일지: YYYY-MM-DD
  
  **현재 활성 태스크**: #XXX - [태스크명]
  
  ## 오늘의 작업 계획
  1. **계획 1**
     - 세부 계획
  
  ## 진행 상황
  - [x] 완료된 작업
  - [ ] 진행 중인 작업
  
  ## 특이사항
  
  ## 다음 단계
  ```

#### 태스크 로그
- 경로: `/docs/work-logs/{username}/tasks/{task-number}-{task-name}.md`
- 구성:
  ```markdown
  # 태스크 XXX: [태스크명]
  
  ## 태스크 정보
  - 생성일: YYYY-MM-DD
  - 완료일: 
  
  ## 태스크 목적
  
  ## 수행 단계
  1. [ ] 단계 1
  2. [ ] 단계 2
  
  ## 참고 자료
  
  ## 진행 상황
  
  ## 메모
  ```

### 태스크 관리 시스템

체계적인 작업 진행을 위한 태스크 관리 방법입니다.

#### 태스크 계획 및 정의
태스크를 만들 때는 다음 원칙을 따릅니다:

- **단일 주제 원칙**: 하나의 태스크는 단일 주제/목적만 다룸
- **명확한 범위**: 태스크의 범위와 결과물이 명확해야 함
- **적절한 크기**: 태스크는 하루 이내에 완료 가능한 크기로 계획

#### 태스크 실행 단계
1. **식별 단계**
   - 현재 태스크 확인 및 상태 파악
   - 출력: 태스크 이름과 간략한 설명
   - 승인 필요: 아니요

2. **계획 단계**
   - 태스크 단계와 접근 방식 계획
   - 출력: 태스크 실행 계획 제안
   - 승인 필요: 예

3. **실행 단계**
   - 실제 태스크 구현
   - 출력: 승인된 계획에 따른 완료된 작업
   - 승인 필요: 예

#### 태스크 관리 원칙
- 하나의 세션에서는 하나의 태스크에 집중
- 새 태스크는 새 채팅 세션 필요
- 이전 태스크는 새 세션에서 계속 가능
- 각 체크리스트 항목은 하나의 작업 세션에서 완료

## 📋 파일 관리 가이드

### 파일 편집 전 체크리스트
1. 파일 크기와 복잡성 평가
2. 파일 크기에 따른 적절한 편집 전략 결정
3. 큰 변경 사항은 논리적 섹션으로 분할
4. 섹션이 토큰 제한을 초과하지 않는지 확인

### 파일 편집 전략
- **작은 파일**: 단일 작업으로 편집 (1000 토큰 미만)
- **중간 파일**: 논리적 섹션으로 편집 (1000-2000 토큰)
- **큰 파일**: 명확한 경계를 가진 여러 순차적 작업으로 편집

### 파일 편집 제한 사항
- 편집당 최대 토큰: 2000
- 대용량 파일 편집 시 섹션별 접근 권장
- 토큰 제한 초과 시 편집 실패 가능성 있음

## 🔍 프로젝트 규칙 시스템

프로젝트 규칙은 에이전트의 행동과 프로젝트 관리 방식을 정의합니다.

### 규칙 파일 구조

- `agents-rules/{name}/project-rules.json` - 메인 규칙 파일 (JSON 형식)
- `agents-rules/{name}/project-rules.ko.json` - 한국어 규칙 정의 (참조용)
- `agents-rules/{name}/project-rules.md` - 마크다운 형식 규칙 문서 (사람이 읽기 쉬움)

### 규칙 파일 관리 시스템

규칙 파일 관리 시스템은 다음과 같이 작동합니다:

1. **원본 파일**: `agents-rules/{name}/project-rules.json`에서 규칙을 정의합니다.
2. **파일 감시**: `doc-watcher.cjs` 스크립트가 규칙 파일 변경을 감시합니다.
3. **파일 복사**: 규칙 파일이 변경되면 `.cursorrules`와 `.windsurfrules` 파일로 복사합니다.
4. **에이전트 로드**: CursorIDE와 같은 AI 에이전트 환경이 이 규칙 파일을 로드합니다.

### 환경별 설정 (.env 파일)

`.env` 파일을 사용하여 규칙 파일 경로와 출력 위치를 설정할 수 있습니다:

```
# 규칙 파일 경로 설정
RULES_FILE=./agents-rules/your-name/project-rules.json

# 규칙 파일의 대상 출력 위치 설정
CURSOR_RULES_FILE=.cursorrules
WINDSURF_RULES_FILE=.windsurfrules
```

### 버전 관리 (.gitignore)

프로젝트에서는 다음 파일들이 `.gitignore`에 추가되어 있어 개인별 설정이 서로 충돌하지 않습니다:

```
# 환경 설정 파일
.env

# 에이전트 규칙 파일
.cursorrules
.windsurfrules
```

이렇게 하면 각 개발자가 자신의 규칙 파일을 독립적으로 관리할 수 있습니다.

### 규칙 개선 원칙
- **에이전트 중심**: 규칙은 에이전트를 제약하기 위한 것이 아니라 서비스하기 위한 것
- **자기 성찰**: 규칙이 실패할 경우 에이전트를 비난하기보다 규칙 개선에 집중
- **지속적 적응**: 규칙은 실제 사용 패턴과 실패에 기반하여 진화해야 함

## 💻 개발 환경 설정

> **참고**: 캐럿 프로젝트는 현재 설계 단계에 있습니다. 아래 내용은 기본적인 설정 과정이며, 실제 개발 환경 설정은 설계가 완료된 후 결정될 예정입니다.

1. **저장소 클론**
   ```powershell
   # Windows PowerShell 환경
   git clone https://github.com/fstory97/caret.git
   Set-Location -Path caret
   ```

2. **Node.js 환경 설정**
   ```powershell
   # Node.js 버전 확인 (v18 이상 권장)
   node -v
   
   # 필요시 nvm-windows를 통한 Node 버전 관리
   # nvm install 18
   # nvm use 18
   ```

3. **의존성 설치**
   ```powershell
   npm install
   ```

4. **환경 설정 파일 생성**
   ```powershell
   # .env.example 파일을 복사하여 .env 파일 생성
   Copy-Item -Path ".env.example" -Destination ".env"
   
   # 필요에 따라 .env 파일 편집 (규칙 파일 경로 등)
   notepad .env
   ```

5. **규칙 파일 감시 시작**
   ```powershell
   # 규칙 파일 변경을 감시하는 스크립트 실행
   node scripts/doc-watcher.cjs
   
   # 백그라운드에서 실행하려면 (별도 창에서 실행)
   Start-Process powershell -ArgumentList "-Command node scripts/doc-watcher.cjs"
   ```

> 캐럿 프로젝트의 설계가 완료되면 개발 서버 실행 방법 및 VSCode 확장 개발 환경 설정 등의 상세 개발 가이드가 추가될 예정입니다.

## 🚀 개발 프로세스

### 작업 시작하기
1. 작업 로그 디렉토리 확인
2. 일일 작업 로그 및 태스크 로그 생성/업데이트
3. 현재 활성 태스크 확인 후 개발 진행

#### 예시 대화
```
개발자: 오늘의 태스크는 무엇인가요?
에이전트: 현재 활성 태스크는 #007 - 개발자 가이드 개선입니다. 
         문서 검토와 개선 사항 식별을 완료했고, 지금은 문서 업데이트를 진행 중입니다.

개발자: 오늘 작업할 내용을 알려주세요.
에이전트: 오늘 작업할 내용은 다음과 같습니다:
         1. developer-guide.md 문서 2차 업데이트
            - 운영체제 환경 명시
            - 규칙 파일 설명 추가
            - .env 파일 설정 방법 추가
         2. 변경 사항 커밋
         작업을 시작할까요?
```

### 코드 변경 및 테스트
1. 개발모드로 에이전트와 소통
2. 변경 사항 구현 및 테스트
3. 파일 변경 후 작업 로그 업데이트

#### 예시 대화
```
개발자: 개발모드
에이전트: 개발모드로 전환했습니다. 어떤 작업을 도와드릴까요?

개발자: scripts/doc-watcher.cjs 파일에 .env 파일 지원을 추가해주세요.
에이전트: scripts/doc-watcher.cjs 파일을 수정하여 .env 파일 지원을 추가하겠습니다.
         [파일 분석 및 수정 작업 진행]
         
         scripts/doc-watcher.cjs 파일 수정이 완료되었습니다.
         다음과 같은 변경을 적용했습니다:
         - .env 파일 로드 기능 추가
         - 규칙 파일 경로를 환경 변수에서 가져오도록 수정
         - 기본값 설정으로 이전 버전과의 호환성 유지
         
개발자: 작업 로그에 완료 상태를 업데이트해주세요.
에이전트: 작업 로그를 업데이트하겠습니다.
         [작업 로그 업데이트 작업 진행]
         
         docs/work-logs/luke-and-alpha/2025-03-24.md 파일이 업데이트되었습니다.
         태스크 #007의 "관련 코드 파일 수정" 항목을 완료로 표시했습니다.
```

### 작업 완료 및 문서화
1. 태스크 로그의 체크리스트 항목 업데이트
2. 일일 작업 로그에 진행 상황 기록
3. 필요시 다음 단계 계획

#### 예시 대화
```
개발자: 오늘 작업한 내용을 정리해주세요.
에이전트: 오늘 완료한 작업은 다음과 같습니다:
         1. scripts/doc-watcher.cjs 파일 수정 (.env 지원 추가)
         2. .env.example 파일 생성
         3. .gitignore 파일 생성
         4. developer-guide.md 문서 2차 업데이트

         태스크 #007 "개발자 가이드 개선"의 진행 상황:
         - 문서 검토 및 개선 사항 식별: 완료
         - 문서 1차 업데이트: 완료
         - 관련 코드 파일 수정: 완료
         - 문서 2차 업데이트: 완료
         - 변경 사항 커밋: 진행 예정

개발자: 다음 작업은 무엇인가요?
에이전트: 다음 작업은 다음과 같습니다:
         1. 태스크 #007 변경사항 커밋 및 완료
         2. 태스크 #008(Cline 프로젝트 분석)로 이동
            - GitHub 저장소 분석
            - 유사점 및 차별점 파악
            - 캐럿 프로젝트에 미치는 영향 평가
```

### 논의 및 설계
1. 논의모드로 에이전트와 소통
2. 아이디어 및 설계 개념 탐색
3. 결정 사항 문서화

#### 예시 대화
```
개발자: 논의모드
에이전트: 논의모드로 전환했습니다. 어떤 주제에 대해 논의해 볼까요?

개발자: VSCode 확장 개발에 대한 접근 방식을 설명해주세요.
에이전트: VSCode 확장 개발에는 크게 다음과 같은 접근 방식이 있습니다:

         1. **명령 기반 확장**: 
            - 특정 명령을 실행하여 기능 활성화
            - VSCode 명령 팔레트를 통해 접근
            - 예: 코드 포매팅, 문서 생성기

         2. **UI 요소 추가 확장**:
            - 사이드바, 패널, 웹뷰 등 UI 요소 추가
            - 시각적 인터페이스 제공
            - 예: 데이터베이스 탐색기, Git 그래프

         3. **언어 기능 확장**:
            - 언어 서버 프로토콜(LSP) 활용
            - 코드 완성, 정의 이동, 오류 표시 등 제공
            - 예: TypeScript 지원, ESLint

         캐럿 프로젝트의 경우, AI 에이전트와의 상호작용을 위한 UI 요소와
         명령 기반 기능을 결합한 접근 방식이 적합할 것으로 보입니다.
         어떤 부분에 더 관심이 있으신가요?
```

### Git 작업 관리
1. 하나의 태스크가 완료되면 관련 변경사항 커밋
2. 커밋 메시지는 `[type]: 태스크 #XXX [description]` 형식 사용
3. 타입 예시: feat(기능), fix(버그수정), docs(문서), style(포맷), refactor(리팩토링)

#### 예시 대화
```
개발자: 지금까지 작업한 내용을 커밋하려고 합니다. 커밋 메시지를 제안해주세요.
에이전트: 다음과 같은 커밋 메시지를 제안합니다:
         
         [docs]: 태스크 #007 개발자 가이드 개선 및 환경 설정 지원 추가
         
         변경 내용:
         - developer-guide.md 파일 업데이트
           - 운영체제 환경 명시 추가
           - 규칙 파일 설명 보강
           - .env 파일 설정 방법 추가
         - scripts/doc-watcher.cjs에 .env 지원 추가
         - .env.example 파일 생성
         - .gitignore 파일 생성

개발자: 커밋을 진행해주세요.
에이전트: 커밋을 진행하기 위해 다음 명령을 실행하겠습니다:
         
         git add .
         git commit -m "[docs]: 태스크 #007 개발자 가이드 개선 및 환경 설정 지원 추가"
         
         명령을 실행해도 될까요?
```

## 🔒 폐쇄 개발 정책

현재 캐럿 프로젝트는 소규모 개발자 그룹 내에서 폐쇄적으로 개발 중입니다. 이 방식은 초기 테스트와 안정화를 위해 채택되었으며, 충분한 성숙도에 도달한 후 공개될 예정입니다.

### 개발 참여 방법
1. 초대된 개발자만 참여 가능
2. 직접 연락을 통한 참여 요청
3. 비공개 테스트 그룹 활동

---
마지막 업데이트: 2025-03-24 